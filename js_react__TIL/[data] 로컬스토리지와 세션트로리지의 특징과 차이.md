# [data] 로컬스토리지와 세션트로리지의 특징과 차이점

강의: 블로그 및 도서
생성일: 2022년 2월 15일 오전 12:08
수정일: 2022년 2월 15일 오후 2:09
스킬 & 언어: 기본 지식
중요도: 💜

html5에서 추가된 저장소로 간단한 키와 값을 저장할 수 있다. (key-value 스토리지 형태)

로컬 스토리지의 데이터는 사용자가 지우지 않는 이상 영구적으로 남아있지만 세션 스토리이지의 데이터는 윈도우나 브라우저 탭을 닫을 때 제거된다.

자동로그인과 같은 지속성이 필요한 데이터는 로컬 스토리이제 저장하고, 일시적으로 필요한 데이터는 세션스토리지에 저장한다. 

- 클라이언트에 저장되기 때문에 비밀번호와 같은 중요한 정보는 저장하지 않는 것이 좋다.
- window 객체 내부에 있다.(storage 객체를 상속받는다.)
- 메소드가 공통적으로 존재한다.
- 도메인 별 용량 제한이 있다. (프로토콜, 호스트, 포트가 같다면 같은 스토리지를 공유한다.)
- 모바일 2.5mb, 데스크탑은 5mb~10mb의 용량 (브라우저 별, 기기 별 다를 수 있음)
- key-value 저장소이기 때문에 키와 밸류 순서대로 저장된다.
    - 값으로 문자열, 불린, 숫자, null, undefined를 저장할 수 있지만 모두 문자열로 변환된다.

***로컬스토리지와 세션스토리지의 기본적인 사용방법은 동일하다. (데이터의 지속성의 차이가 있다!)***

**저장** : `localStorage.setItem(키, 값)`

**조회** : `localStorage.getItem(키)`

**키 삭제** : `localStorage.removeItem(키)`

**스토리지 전체 삭제** :  `localStorage.clear()`

**세션스토리지** : `window.sessionStorage`

---

```jsx
localStorage.setItem('object', { a: 'b' });
localStorage.getItem('object'); // [object Object(생성자)]
```

객체는 toString 메소드가 호출된 형태로 저장된다. 

- 키-값의 형태로 여러개를 저장할 수도 있으나
- 한 번에 한 객체를 통째로 저장하고 싶을 때에는 `JSON.stringify`를 사용하여 문자열로 변환하여 저장하고, 조회를 할 때에는 `JSON.parse` 를 통해 다시 코드로 변환하여 사용한다.

---

**쿠키 또한 데이터를 저장할 수 있는데 쿠키는 4kb의 용량 제한 및 서버를 요청할 때마다 서버에서 쿠키가 같이 전송된다.**

→ 브라우저에서 서버에게 나에대한 정보를 가져오라는 명령을 실행 할 때 서버는 요청 자체만으론 요청의 주체를 확인할 수 없다. 그렇기 때문에 쿠키에 나에 대한 정보를 담아 서버로 보내면 서버는 정보를 파악할 수 있게 된다. *(쿠키는 서버와 클라이언트의 지속적인 데이터 교환을 위해 만들어졌다.)*

‼️ 단, 4kb의 용량을 거의 다 채운 쿠키가 있다면 요청 시마다 기본 4kb의 데이터를 사용하게 된다. 이것은 데이터 낭비를 발생시킨다. (이 때 로컬스토리지와 세션스토리지에 저장할 수 있다. 이 두 스토리지는 서버에 자동 전송되지 않는다.)